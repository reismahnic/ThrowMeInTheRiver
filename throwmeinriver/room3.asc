// room script file

bool started;

int fadeTransparency;
bool fadedIn;

int waitingTime;
bool waited;

bool fadedOut;

function room_AfterFadeIn()
{
    cJoseph60.SetAsPlayer();

    titleScreen1.Visible = true;
    titleScreen1.Transparency = 100;
    fadeTransparency = 100;
    started = true;
    
    aSlowjam_transition_1_v1.Play(eAudioPriorityNormal);
}

function room_Load()
{
    cJoseph60.Transparency=100;
}

function room_RepExec()
{
  if(started) {
    if(fadedOut) {
      player.ChangeRoom(303);
    } else if (waited) {
      //fade out
      if(fadeTransparency < 100) {
        fadeTransparency++;
        titleScreen1.Transparency = fadeTransparency;
      } else {
        fadedOut = true;
      }
    } else if(fadedIn) {
      if(waitingTime < 30) {
        waitingTime++;
      } else {
        waited = true;
      }
    } else {
      if(fadeTransparency > 0) {
        fadeTransparency--;
        titleScreen1.Transparency = fadeTransparency;
      } else {
        fadedIn = true;
      }
    }
  }
}

function room_Leave()
{
  titleScreen1.Visible = false;
}
